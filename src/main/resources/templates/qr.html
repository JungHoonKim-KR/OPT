<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>성격 유형 결과</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            overflow-x: hidden;
        }

        /* 전체 레이아웃 */
        .result-container {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .result-scroll-container {
            width: 100%;
            height: 100vh;
            overflow-y: auto;
            scroll-snap-type: y mandatory;
            scroll-behavior: smooth;
            -webkit-overflow-scrolling: touch;
            scroll-padding-top: 0;
        }

        /* 패널 공통: 화면에 딱 맞게 */
        .panel {
            width: 100vw;
            height: 100vh;
            scroll-snap-align: start;
            scroll-snap-stop: always;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 8vh 6vw;
            box-sizing: border-box;
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease, transform 0.8s ease;
            will-change: opacity, transform;
        }

        .panel.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* 1️⃣ 타입 소개 패널 */
        .type-intro-panel {
            background: #101010;
            color: white;
            text-align: center;
        }

        .type-image {
            width: 50vw;
            max-width: 150px;
            margin: 2vh 0;
            object-fit: contain;
        }

        .character-image img {
            width: 287px;
            height: auto;
            object-fit: contain;
            margin-top: 2vh;
        }

        .intro-text {
            font-family: Pretendard;
            font-weight: 700;
            font-style: Bold;
            font-size: 15.94px;
            line-height: 140%;
            letter-spacing: 0.06px;

            color: var(--bg-color);
        }

        .hashtags {
            display: flex;
            flex-wrap: wrap;
            gap: 3vw;
            justify-content: center;
            margin: 2vh 0;
        }

        .hashtag {
            font-family: Pretendard;
            font-weight: 700;
            font-style: Bold;
            font-size: 12.74px;
            letter-spacing: 0.05px;

            padding: 1.2vh 4vw;
            border: 0.3px solid #fff;
            border-radius: 15.39px;
            color: var(--bg-color);
            line-height: 40%;
        }

        .sumarry-description {
            font-weight: 800;
            border-radius: 11px;
            background-color: var(--bg-color);
            color: #ffffff;
            font-family: Pretendard;
            font-style: ExtraBold;
            line-height: 40%;
            letter-spacing: 0.25px;
            text-align: center;
            padding: 10px;
            width: 80%;
            margin-bottom: 17px;
        }

        .summary {
            font-size: 10px;
            line-height: 40%;
        }

        .type-description {
            padding: 16px;
            font-family: Pretendard;
            font-style: SemiBold;
            font-size: clamp(0.75rem, 2.5vw, 1rem);

            line-height: 155%;
            letter-spacing: 0.06px;
            text-align: center;
            color: var(--bg-color);
            margin-top: 3vh;
            display: flex;
            border-radius: 15.19px;
            background: transparent;
            letter-spacing: 0.25px;
            text-align: center;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border: 0.2px solid #fff;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        /* 2️⃣ 매치 패널 */
        .match-panel {
            background: var(--bg-color);
            color: #fff;
            text-align: center;
        }

        .panel-title {
            font-size: clamp(0.8rem, 4vw, 2.5rem);
            margin-bottom: 4vh;
            font-weight: 800;
            line-height: 100%;
        }

        .match-card-container {
            display: flex;
            flex-direction: column;
            gap: 3vh;
        }

        .match-card {
            gap: 20px;
            display: flex;
            border: 0.1px solid #fff;
            border-radius: 16px;
            padding: 3vh 4vw;

        }

        .match-character {
            width: 165px;
            height: 166px;
            border-radius: 19.35px;
            background-color: rgba(255, 255, 255, 0.1); /* 배경만 반투명 */
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-sizing: border-box;
            align-items: center;
        }

        .match-label {
            font-family: Pretendard;
            font-weight: 700;
            font-style: Bold;
            font-size: 11.38px;
            leading-trim: CAP_HEIGHT;
            line-height: 100%;
            letter-spacing: 0%;
            padding-left: 6px;
            padding-bottom: 15px;
            text-align: start;
        }

        .match-card img {
            width: 145px;
            height: auto;
            object-fit: contain;
        }

        .card-text-container{
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .card-text-container-top{
            padding-top: 38px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .card-text-container img{
            margin-bottom: 2px;
            width: 67px;
            height:auto;
        }

        .match-summary{
            font-family: Pretendard;
            font-weight: 700;
            font-style: Bold;
            font-size: 8px;
            leading-trim: CAP_HEIGHT;
            line-height: 147%;
            letter-spacing: 0%;
            padding-bottom: 5px;
            text-align: start;
        }

        .match-description {
            font-family: Pretendard;
            font-weight: 700;
            font-style: Bold;
            font-size: 12px;
            line-height: 147%;
            letter-spacing: 0%;

            /* font-size: clamp(0.6rem, 2vw, 1.3rem); */
            line-height: 150%;
            /* margin-top: 1.5vh; */
        }

        /* 루틴 */
        .routine-text {
            margin-top: 3vh;
            font-size: clamp(0.8rem, 2vw, 2rem);
            font-weight: 800;
            line-height: 100%;
        }

        .routine-list {
            list-style: none;
            padding: 20px;
            margin: 2vh 0;
            border: 1.14px solid rgba(255, 255, 255, 1);
            border-radius: 19.35px;
        }

        .routine-list li {

            text-align: start;
            font-size: clamp(0.5rem, 2.5vw, 1.3rem);
            line-height: 160%;
        }

        /* 스크롤바 숨기기 */
        .result-scroll-container::-webkit-scrollbar {
            display: none;
        }

        .result-scroll-container {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body>

<div class="result-container">
    <div class="result-scroll-container" id="scrollContainer">

        <section class="panel type-intro-panel">
            <div class="type-intro-content">
                <p class="intro-text" id="typeName"></p>

                <img id="typeImage" class="type-image" alt="Type">

                <div class="character-image">
                    <img id="characterGif" alt="Character">
                </div>

                <div class="hashtags" id="hashtags"></div>

                <div class="type-description">
                    <div class="sumarry-description" id="summary"></div>
                    <div id="description" ></div>
                </div>
            </div>
        </section>

        <section class="panel match-panel">
            <div class="match-content">
                <h3 class="panel-title">BEST / WORST<br>MATCH</h3>

                <div class="match-card-container">

                    <div class="match-card">
                        <div>
                            <div class="match-label">BEST</div>
                            <div class="match-character">
                                <img id="bestImage" alt="Best Match">

                            </div>
                        </div>

                        <div class="card-text-container">
                            <div class="card-text-container-top">
                                <img id="bestTitleImage" alt="Best Match">
                                <p class="match-description" id="bestDescription"></p>
                            </div>

                            <div class="match-summary" id="bestTypeSummary"></div>
                        </div>


                    </div>
                    <div class="match-card">

                        <div>
                            <div class="match-label">WORST</div>
                            <div class="match-character">
                                <img id="worstImage" alt="Worst Match">

                            </div>
                        </div>
                        <div class="card-text-container">
                            <div class="card-text-container-top">
                                <img id="worstTitleImage" alt="Best Match">
                                <p class="match-description" id="worstDescription"></p>
                            </div>
                            <p class="match-summary" id="worstTypeSummary"></p>
                        </div>

                    </div>
                </div>
                <div class="routine-text">ROUTINE SUGGESTION</div>
                <ul class="routine-list" id="routineList"></ul>
            </div>
        </section>
    </div>
</div>

<script>
    // ============================================
    // 4. 원본 JavaScript 데이터 (생략 없음)
    // ============================================
    const personaDataMap = {
        DEFA: {
            backgroundColor: "#E7B9C6",
            typeCode: "DEFA",
            typeName: "디지털 파티피플",
            hashTags: ["#분위기메이커", "#에너지", "#좋아요폭탄"],
            summary: "밝고 유쾌하게 피드를 물들이는 디지털 활력소",
            description:
                "DEFA는 활발한 소통과 즉흥적인 표현으로 디지털 공간을 밝히는 사람이다. 댓글 하나로 대화의 흐름을 바꾸고, 단톡방의 공기를 살린다. '함께 있음'을 가장 중요하게 여기며, 관계 속에서 에너지를 얻는다.",
            routines:
                "🔥 하루 한 번, 즉흥적으로 떠오른 생각을 스토리로 남겨보세요.\n🎧 하루 중 ‘반응하지 않는 시간’을 일부러 만들어보세요. 감정 피로를 줄입니다.\n🫶 너무 빠른 흐름에 휩쓸리지 않도록 ‘잠깐의 휴식’을 기록해보세요.",
            bestType: "DEFP",
            bestTypeSummary: "밈 감각이 통하는 즐거운 조합",
            bestTypeDescription:
                "쇼츠 소비러", // ★ 수정
            worstType: "DMIP",
            worstTypeSummary: "표현의 과잉과 분석의 냉정이 부딪히는 조합",
            worstTypeDescription:
                "사일런트 리서쳐", // ★ 수정
        },

        DEFP: {
            backgroundColor: "#E7B9C6",
            typeCode: "DEFP",
            typeName: "쇼츠 소비러",
            hashTags: ["#도파민", "#순간의 즐거움", "#쇼츠러버"],
            summary: "빠른 자극 속에서 웃음을 찾는 탐험가",
            description:
                "DEFP는 쇼츠·릴스·짤 등 짧고 자극적인 콘텐츠에 즉각 반응하는 유형이다. 깊은 정보보다 순간의 감정과 임팩트를 선호한다. 유행의 초입을 감지하는 감각이 탁월하며, 새로운 형식과 트렌드를 빠르게 흡수한다.",
            routines:
                "📂 저장한 쇼츠 중 ‘한 가지 주제’로 정리해보세요.\n🧩 즉흥적 즐거움 대신 ‘기억에 남는 한 장면’을 찾아보세요.\n📈 하루의 첫 영상은 ‘기분이 편안한 콘텐츠’로 시작해보세요.",
            bestType: "DEFA",
            bestTypeSummary: "밈 감각이 통하는 즐거운 조합",
            bestTypeDescription:
                "디지털 파티피플", // ★ 수정

            worstType: "NEFP",
            worstTypeSummary: "리듬과 깊이의 단절 조합",
            worstTypeDescription:
                "피드 유령", // ★ 수정
        },

        DMFA: {
            backgroundColor: "#E7B9C6",
            typeCode: "DMFA",
            typeName: "밈 박사",
            hashTags: ["#밈아카이브", "#유머비평", "#유머감각천재"],
            summary: "유머의 본질을 재창조하는 감각형 크리에이터",
            description:
                "DMFA는 유머의 구조와 맥락을 분석하고 재창조하는 유형이다. 밈을 소비하는 데 그치지 않고, 비평적 시각으로 유머의 본질을 파악한다. 재치와 빠른 판단력을 가졌으며, 감정적 콘텐츠보다 지적 유머에 더 강한 흥미를 느낀다.",
            routines:
                "📂 저장한 밈 테마별 폴더 만들기\n✔️ 공유하기 적절한 콘텐츠인지 다시 확인하기\n💬 때때로 진지한 피드에도 감정 리액션을 남겨 균형을 잡아보세요.",
            bestType: "NMFA",
            bestTypeSummary: "유머와 감정의 깊이가 비슷한 환상의 조합",
            bestTypeDescription:
                "말없는 낚시꾼", // ★ 수정
            worstType: "DEIP",
            worstTypeSummary: "효율적인 정보전달과 풍자적 해석의 온도차.",
            worstTypeDescription:
                "고요한 큐레이터", // ★ 수정
        },

        NMFA: {
            backgroundColor: "#E7B9C6",
            typeCode: "NMFA",
            typeName: "말없는 낙서꾼",
            hashTags: ["#감정기록자", "#짤수집가", "#조용한공감"],
            summary: "이미지로 내면을 기록하는 밤의 크리에이터",
            description:
                "NMFA는 언어보다 이미지로 소통한다. 짤, 밈, 사진 한 장으로 감정을 전달하는 사람이다. 피드는 단정하거나 완벽하지 않지만, 꾸밈없이 솔직하다. 감정 표현은 적지만, 유머와 감성이 공존하는 은근한 정서를 만들어낸다.",
            routines:
                "🖍 오늘 본 가장 웃긴 짤을 저장하고, 내 감정과 엮어보세요.\n📅 일주일에 한 번, ‘이번 주 감정 요약 짤’을 만들어요.\n🌙 새벽 감성에 과몰입하지 말고, 스스로의 속도를 늦추세요.",
            bestType: "DMFA",
            bestTypeSummary: "짤 하나로 통하는 웃음 코드, 완벽한 밈 시너지",
            bestTypeDescription:
                "밈 박사", // ★ 수정
            worstType: "NEIP",
            worstTypeSummary: "소통 방식의 충돌 조합",
            worstTypeDescription:
                "고요한 밤의 탐색자", // ★ 수정
        },

        DMIA: {
            backgroundColor: "#ABD8D0",
            typeCode: "DMIA",
            typeName: "똑부러진 정보 쉐프",
            hashTags: ["#질서중시", "#체계덕후", "#팩트체크"],
            summary: "온라인 속 데이터를 요리하는 완벽주의자",
            description:
                "DMIA는 복잡한 정보를 정리하고 재구성하는 능력이 뛰어나다. 필요한 데이터만 명확한 근거와 구조로 재배치하여 이해하기 쉬운 콘텐츠를 만든다. 트렌드보다 '왜 주목받는가'를 분석하며, 메모 앱과 폴더 관리의 달인이다.",
            routines:
                "🌀 정리만 하다 보관만 되는 정보가 있다면, 실제로 사용해보세요.\n📎 하루 10분, 불필요한 탭을 정리해보세요.\n 🗣 감정이 개입된 피드백을 일부러 수용해보세요. 새로운 관점이 생깁니다.",
            bestType: "DEIA",
            bestTypeSummary: "논리적 재가공과 전달의 완벽한 순환의 조합",
            bestTypeDescription:
                "정보 전달꾼", // ★ 수정
            worstType: "NEFA",
            worstTypeSummary: "논리와 감정의 언어가 맞지 않는 조합",
            worstTypeDescription:
                "감성 피드 주인공", // ★ 수정
        },
        DEIP: {
            backgroundColor: "#ABD8D0",
            typeCode: "DEIP",
            typeName: "고요한 큐레이터",
            hashTags: ["#큐레이터", "#무드정리", "#정리의 미학"],
            summary: "소리 없이 정보를 모으는 큐레이터",
            description:
                "DEIP는 온라인 속 '정리의 미학'을 아는 유형이다. 새로운 정보를 모으되 즉시 드러내지 않고, 폴더와 북마크 속에서 자신만의 세계를 차근히 쌓아간다. 표현은 절제되어 있지만, 자신만의 관점으로 자료를 축적하며 취향과 기준이 뚜렷하다.",
            routines:
                "📂 저장 폴더를 주제별로 정리해보세요.\n💭 혼자만의 판단을 줄이고, 가끔은 공유로 다른 시선을 받아보세요.\n🪞 보여주지 않은 나만의 무드를 하나의 보드로 만들어보세요.",
            bestType: "DMFP",
            bestTypeSummary: "시각적 감수성과 맥락 읽기가 자연스럽게 맞닿는 조합.",
            bestTypeDescription:
                "은밀한 눈팅러", // ★ 수정
            worstType: "DMFA",
            worstTypeSummary: "효율적인 정보전달과 풍자적 해석의 온도차.",
            worstTypeDescription:
                "밈 박사", // ★ 수정
        },
        DEIA: {
            backgroundColor: "#ABD8D0",
            typeCode: "DEIA",
            typeName: "정보 전달꾼",
            hashTags: ["#소통매니저", "#트렌드해설자", "#정보메신저"],
            summary: "빠르게 정보를 묶어 전하는 커뮤니케이터",
            description:
                "DEIA는 정보 순환의 중심에 서 있는 지적 커뮤니케이터다. 흥미로운 사실, 트렌드를 발견하면 곧바로 세상과 나누고 싶어 한다. 논리적 사고력과 사회적 감각이 결합되었으며, 새로운 소식이나 인사이트를 포착해 가장 적절한 형태로 전달하는 걸 즐긴다. ‘누가 아직 모르지?’가 행동의 출발점이다.",
            routines:
                "🌀 정리만 하다 보관만 되는 정보가 있다면, 실제로 사용해보세요.\n📎 하루 10분, 불필요한 탭을 정리해보세요.\n🗣 감정이 개입된 피드백을 일부러 수용해보세요. 새로운 관점이 생깁니다.",
            bestType: "DMIA",
            bestTypeSummary: "논리적 재가공과 전달의 완벽한 순환의 조합",
            bestTypeDescription:
                "똑부러진 정보 쉐프", // ★ 수정
            worstType: "NEFA",
            worstTypeSummary: "논리와 감정의 언어가 맞지 않는 조합",
            worstTypeDescription:
                "감성 피드 주인공", // ★ 수정
        },
        NMIA: {
            backgroundColor: "#ABD8D0",
            typeCode: "NMIA",
            typeName: "피드 정비공",
            hashTags: ["#정리정돈", "#관리자", "#완벽주의자"],
            summary: "혼잡을 질서로 바꾸는 시스템 관리자",
            description:
                "NMIA는 피드의 '보이지 않는 미학'을 아는 사람이다. 타임라인은 색감, 글자 수, 여백까지 조율되어 있다. 온라인 공간을 '작업실'처럼 관리하며, 불필요한 정보는 즉시 제거한다. 완벽한 자기관리의 공간이자, 내면의 질서를 반영하는 거울이다.",
            routines:
                "🧽 하루 한 번, 알고리즘 새로고침을 해보세요.\n💡 완벽한 구조보다 즉흥적인 감정 표현을 시도해보세요.\n🧹 피드 정리만 하지 말고, 우연한 콘텐츠에 노출되어보세요.",
            bestType: "DMIP",
            bestTypeSummary:
                "논리적 재가공과 전달의 구조 설계와 정비가 결합된\n완벽한 구조형 파트너십.",
            bestTypeDescription:
                "사일런트 리서쳐", // ★ 수정
            worstType: "DEFA",
            worstTypeSummary: "함께 있을수록 오히려 피로감이 누적되는 조합",
            worstTypeDescription:
                "디지털 파티피플", // ★ 수정
        },
        DMIP: {
            backgroundColor: "#AAC7DD",
            typeCode: "DMIP",
            typeName: "사일런트 리서처",
            hashTags: ["#트렌드리서처", "#정리본능", "#조용한관찰자"],
            summary: "세상의 맥락을 읽어내는 온라인 관찰자",
            description:
                "DMIP는 온라인 세계를 탐색하되 흔적을 거의 남기지 않는다. 댓글, 좋아요, 공유 없이 검색과 저장만 존재한다. 직접 개입보다 맥락을 기록하며, 철저하게 자신만을 위한 정보 수집에 집중한다. '통찰의 깊이'는 가장 깊은 편인 온라인상의 조용한 행인이다.",
            routines:
                "📖 하루에 한 번은 ‘검색 없이’ 콘텐츠를 탐색해보세요. 우연한 영감이 필요합니다.\n🔗  알고리즘 변화를 관찰해보세요.\n📌  주제별 보드(비주얼+메모)로 아카이브 구성해보세요.",
            bestType: "NMIA",
            bestTypeSummary: "구조 설계와 정비가 결합된\n완벽한 구조형 파트너십.",
            bestTypeDescription:
                "피드 정비공", // ★ 수정
            worstType: "DEFA",
            worstTypeSummary: "표현의 과잉과 분석의 냉정이 \n부딪히는 조합",
            worstTypeDescription:
                "디지털 파티피플", // ★ 수정
        },
        DMFP: {
            backgroundColor: "#AAC7DD",
            typeCode: "DMFP",
            typeName: "은밀한 눈팅러",
            hashTags: ["#맥락감지", "#눈팅장인", "#관찰자모드"],
            summary: "모든 걸 보지만 아무것도 남기지 않는 유저",
            description:
                "누구보다 피드를 자주 들여다보지만, 존재를 드러내지 않는 유형이다. 콘텐츠를 직접 만들기보단 타인의 흐름에 동화된다. 하지만 트렌드와 상황 파악은 빠르며, 상황에 따라 은밀하게 반응한다. 피드 속 작은 뉘앙스를 읽고 사람들의 흐름을 예측하는 디지털 감각이 날카롭다.",
            routines:
                "📂  저장한 콘텐츠를 정리해보세요.\n🔗  공감한 콘텐츠는 조용히 공유해도 좋아요.\n💬  직접적인 표현을 시도하면, 의외의 연결이 생깁니다.",
            bestType: "DEIP",
            bestTypeSummary: "시각적 감수성과 맥락 읽기가 \n자연스럽게 맞닿는 조합.",
            bestTypeDescription:
                "고요한 큐레이터", // ★ 수정
            worstType: "NEIA",
            worstTypeSummary:
                "감각이 폭발하는 창조형과, 조용히 \n맥락을 읽는 관찰형의 충돌",
            worstTypeDescription:
                "슬리핑 브레이커", // ★ 수정
        },
        NMIP: {
            backgroundColor: "#AAC7DD",
            typeCode: "NMIP",
            typeName: "새벽의 눈팅 요정",
            hashTags: ["#새벽스캔", "#은밀관찰", "#내적수집가"],
            summary: "모두가 잠든 새벽, 세상의 흐름을 읽는 관찰자",
            description:
                "NMIP는 밤에 조용히 피드를 훑으며 정보를 모으지만 외부에 표시하지 않는다. 좋아요나 댓글 같은 표시는 적고, 스스로의 아카이브를 채운다. 새벽 시간대의 정적 속에서 조용히 세상을 읽고 다음 날의 대화를 준비한다. 감정 표현은 최소화되었지만, 세상의 미묘한 변화에는 민감하다.",
            routines:
                "🌙  단순히 ‘정보’가 아닌 ‘느낌’을 기록해보세요. 감각의 균형이 생깁니다.\n✍️ 스크린샷에 간단한 메모를 남겨보세요.\n💭 너무 오래 화면을 응시했다면, 눈을 감고 조용히 머릿속을 정리해보세요.",
            bestType: "NEIA",
            bestTypeSummary: "서로의 리듬을 보완하며 \n영감의 균형을 잡는 조합",
            bestTypeDescription:
                "슬리핑 브레이커", // ★ 수정
            worstType: "NMFP",
            worstTypeSummary: "현실과 환상 사이의 불협화음",
            worstTypeDescription:
                "디지털 몽환가", // ★ 수정
        },
        NEIP: {
            backgroundColor: "#AAC7DD",
            typeCode: "NEIP",
            typeName: "고요한 밤의 탐색자",
            hashTags: ["#야행성", "#자기탐색자", "#사색"],
            summary: "새벽의 정적 속에서 의미와 감정을 분류하는 사색가",
            description:
                "NEIP는 감정의 깊이를 스스로 정리하며, 콘텐츠를 자신만의 기준으로 선별한다. 짧은 글귀, 정적인 영상, 잔잔한 음악에 끌리며, 그날의 감정을 정리하듯 피드를 정돈한다. 밤의 차분한 공기를 통해 사고를 확장하며, 감성과 정보의 균형을 중요하게 여긴다. 내면에선 항상 무언가를 기록 중이다.",
            routines:
                "🌒 감정이 쌓이기 전에, 하루의 감정 요약 문장을 남겨보세요. \n💡 감정 콘텐츠와 정보 콘텐츠를 따로 분류해보세요。\n📁 주 1회, 저장 폴더의 흐름을 점검하세요.",
            bestType: "NMFP",
            bestTypeSummary:
                "조용히 서로의 리듬을 존중하며, \n같은 시간대의 감각으로 연결되는 새벽형 조합.",
            bestTypeDescription:
                "디지털 몽환가", // ★ 수정
            worstType: "NMFA",
            worstTypeSummary: "소통 방식의 충돌 조합",
            worstTypeDescription:
                "말없는 낚시꾼", // ★ 수정
        },
        NEFA: {
            backgroundColor: "#D4BDE2",
            typeCode: "NEFA",
            typeName: "감성 피드 주인공",
            hashTags: ["#느좋피드", "#새벽감성", "#감성기록자"],
            summary: "감정 표현이 피드를 채우는 이모지 마스터",
            description:
                "NEFA는 공감 능력과 감정 몰입이 뛰어나며, 콘텐츠 반응도 적극적이다. 글·사진·플레이리스트를 섞어 감정의 파장을 설계한다. 반응을 받을 때 기쁨을 느끼며, 공감이 쌓이면 더 많은 글을 쓴다. 모든 활동은 '내가 느낀 것을 다른 사람과 나누고자 하는 욕구'에서 나온다.",
            routines:
                "💬 감정 표현 전엔, ‘이건 내 진심인가, 순간인가’를 구분해보세요.\n🌙 감정이 과열될 땐, 반응을 멈추고 잠시 피드 밖으로 나와보세요.",
            bestType: "NEFP",
            bestTypeSummary:
                "보이지 않는 반응 속에서 안정과 \n위로를 주고받는, 말 없는 궁합.",
            bestTypeDescription:
                "피드 유령", // ★ 수정
            worstType: "DMIA",
            worstTypeSummary:
                "위로를 원한 말에 해결책이 돌아와, \n마음의 리듬이 엇갈리는 관계.",
            worstTypeDescription:
                "똑부러진 정보 쉐프", // ★ 수정
        },
        NMFP: {
            backgroundColor: "#D4BDE2",
            typeCode: "NMFP",
            typeName: "디지털 몽환가",
            hashTags: ["#취향확고", "#잔잔한유영", "#새벽관찰자"],
            summary: "세상의 소음 속 자신만의 리듬을 찾는 탐험가",
            description:
                "NMFP는 피드를 가볍게 넘기며 세상의 흐름을 관찰하지만, \n그 안에서 자신만의 질서를 찾는 사람이다. 소셜에서 드러내는\n 표현은 거의 없지만, 밈과 유머, 시각적 이미지처럼 ‘생각 없이 \n즐길 수 있는 콘텐츠’에 자연스럽게 끌린다. 모든 걸 깊이 탐구하진 않지만, 그 순간의 재미와 리듬을 자신만의 속도로 흡수한다.\nNMFP에게 디지털 세계는 경쟁이나 소통의 공간이 아니라, \n고요한 취향의 우주다.",
            routines:
                "☁️ 콘텐츠를 소비한 뒤, 최소 하나의 생각을 기록해보세요.\n 🕯 새벽의 정적 속에서 재정비하는 시간을 가지세요. 피드도, 마음도 가볍게.\n🌙 피드를 끝없이 넘기기보다, 마음에 남은 한 장면에 잠시 머물러보세요.",
            bestType: "NEIP",
            bestTypeSummary: "조용히 서로의 리듬을 존중하며, \n같은 시간대의 감각으로 연결되는 새벽형 조합.",
            bestTypeDescription:
                "고요한 밤의 탐색자", // ★ 수정
            worstType: "DEIA",
            worstTypeSummary: "속도와 소통의 리듬 불일치 조합",
            worstTypeDescription:
                "정보 전달꾼", // ★ 수정
        },
        NEFP: {
            backgroundColor: "#D4BDE2",
            typeCode: "NEFP",
            typeName: "피드 유령",
            hashTags: ["#감정유목민", "#즉흥러", "#디지털방랑자"],
            summary: "은밀하게 온라인 공간을 유영하는 방랑자",
            description:
                "NEFP는 밤의 피드에서 공기를 바꾸는 은밀한 분위기 메이커다.\nNEFP는 조용히 존재하지만, 온라인 세계의 공기를 은근하게\n 움직이는 타입이다. 이들은 밤에 주로 활동을 시작한다. 리포스트 한 줄, \n짧은 음악 공유, 간결한 스토리로 감정을 전한다. 표면적으로는 무심해 \n보여도 그 안에는 예민한 감정 센서와 미묘한 유머 코드가 숨어 있다.\n ‘보이지 않는 표현력’의 달인으로, 드러내지 않아도 존재감이 느껴진다.",
            routines:
                "💭 감정을 저장만 하지 말고, 가볍게 공유해보세요. 공감의 폭이 넓어집니다.\n🫧 피드 대신 저장함을 뒤져 ‘나의 관심사’를 재발견해보세요.\n🪶 사라진 스토리나 일시적인 기록 속에서, 진짜 나의 흔적을 찾아보세요.",
            bestType: "NEFA",
            bestTypeSummary: "보이지 않는 반응 속에서 안정과 \n위로를 주고받는, 말 없는 궁합.",
            bestTypeDescription:
                "감성 피드 주인공", // ★ 수정
            worstType: "DEFP",
            worstTypeSummary: "리듬과 깊이의 단절 조합",
            worstTypeDescription:
                "쇼츠 소비러", // ★ 수정
        },
        NEIA: {
            backgroundColor: "#D4BDE2",
            typeCode: "NEIA",
            typeName: "슬리핑 브레이커",
            hashTags: ["#새벽 집중형", "#감격과 정보 사이", "#알람"],
            summary: "새벽의 정적을 깨는 정보 탐색자",
            description:
                "NEIA는 새벽이 되면 깨어나는 사람이다. 감성 글귀나 밈에 몰입하다가도, \n흥미로운 주제나 트렌드가 눈에 띄면 즉시 반응한다. 새로운 정보와 감정을 \n동시에 흡수하며, 콘텐츠 속에서 즐거움과 의미를 함께 찾는다. 댓글, 공유,\n 스토리 반응 등으로 활발히 참여하며, 감정의 리듬에 맞춰 피드를 움직인다.\n감성적이지만 유쾌한 에너지로 가득한 밤의 공기를 깨우는 브레이커.",
            routines:
                "🌙 잠들기 전 10분만이라도 화면을 멀리해보세요. 감정 피로가 줄어듭니다.\n💭 감정적 영감에 휩쓸리지 말고, 기록을 남겨 흐름을 정리해보세요.\n🕯 빠르게 반응하기보다, 하루 한 번은 피드를 정리하는 시간으로 마무리하세요.",
            bestType: "NMIP",
            bestTypeSummary: "서로의 리듬을 보완하며 \n영감의 균형을 잡는 조합",
            bestTypeDescription:
                "새벽의 눈팅 요정", // ★ 수정
            worstType: "DMFP",
            worstTypeSummary: "감각이 폭발하는 창조형과, 조용히 \n맥락을 읽는 관찰형의 충돌",
            worstTypeDescription:
                "은밀한 눈팅러", // ★ 수정
        },
        // URL에 잘못된 타입이 들어왔을 때를 대비한 기본값
        default: {
            backgroundColor: "#333333",
            title: "TYPE NOT FOUND",
            name: "유형을 찾을 수 없음",
            description:
                "요청하신 페르소나 유형을 찾을 수 없습니다. URL을 확인해주세요.",
        },
    };
    // ============================================
    // 5. ⚡️ 핵심 수정 영역 ⚡️
    // ============================================
</script>

<script th:inline="javascript">
    /*<![CDATA[*/

    // 7. Spring 컨트롤러가 "typeCode"라는 이름으로 전달한 값을
    //    'serverTypeCode'라는 JavaScript 변수에 주입합니다.
    const serverTypeCode = /*[[${typeCode}]]*/ 'DEFA'; // 'DEFA'는 Thymeleaf 미작동 시 기본값
    /*]]>*/

    // 8. URL 파싱 함수(getTypeCodeFromUrl)는 삭제됨.

    // 9. 이미지 경로 함수 수정 (절대 경로 '/' 추가)
    function getTypeImage(typeCode) {
        return `/assets/images/typeNames/${typeCode}.png`;
    }

    function getCharacterGif(typeCode) {
        return `/assets/images/characters/${typeCode}.gif`;
    }

    function getCharacterMatchImage(typeCode) {
        return `/assets/images/matchCharacters/${typeCode}.png`;
    }
    function getCharacterMatchTypeImage(typeCode){
        return `/assets/images/matchCharactersType/${typeCode}.png`;
    }


    // 10. 페이지 로드 시 실행 (DOM 주입 로직)
    document.addEventListener('DOMContentLoaded', function() {

        // 11. URL 파싱 대신, 서버에서 주입받은 'serverTypeCode' 변수를 사용
        const typeCode = serverTypeCode;
        const resultData = personaDataMap[typeCode] || personaDataMap['default'];

        if (!resultData || typeCode === 'default') {
            console.error('타입을 찾을 수 없습니다:', typeCode);
            document.body.innerHTML = '<div style="display:flex;justify-content:center;align-items:center;height:100vh;font-size:24px;">타입을 찾을 수 없습니다.</div>';
            return;
        }

        // --- 12. 이하 데이터 주입 로직은 원본과 100% 동일합니다. ---

        // CSS 변수 설정
        document.documentElement.style.setProperty('--bg-color', resultData.backgroundColor);

        // 텍스트 채우기
        document.getElementById('typeName').textContent = resultData.typeName;
        document.getElementById('summary').textContent = resultData.summary;
        document.getElementById('description').textContent = resultData.description;
        document.getElementById('bestDescription').textContent = resultData.bestTypeDescription;
        document.getElementById('worstDescription').textContent = resultData.worstTypeDescription;
        document.getElementById('bestTypeSummary').textContent = resultData.bestTypeSummary;
        document.getElementById('worstTypeSummary').textContent = resultData.worstTypeSummary;
        // 이미지 설정
        document.getElementById('typeImage').src = getTypeImage(resultData.typeCode);
        document.getElementById('characterGif').src = getCharacterGif(resultData.typeCode);
        document.getElementById('bestImage').src = getCharacterMatchImage(resultData.bestType);
        document.getElementById('worstImage').src = getCharacterMatchImage(resultData.worstType);
        document.getElementById('bestTitleImage').src = getCharacterMatchTypeImage(resultData.bestType);
        document.getElementById('worstTitleImage').src = getCharacterMatchTypeImage(resultData.worstType);

        // 해시태그 렌더링
        const hashtagsContainer = document.getElementById('hashtags');
        resultData.hashTags.forEach(tag => {
            const tagEl = document.createElement('div');
            tagEl.className = 'hashtag';
            tagEl.textContent = tag;
            hashtagsContainer.appendChild(tagEl);
        });

        // 루틴 렌더링
        const routineList = document.getElementById('routineList');
        const routineLines = resultData.routines.split('\n').filter(line => line.trim() !== '');
        routineLines.forEach(routine => {
            const li = document.createElement('li');
            li.textContent = routine;
            routineList.appendChild(li);
        });

        // 스크롤 애니메이션 설정 (원본과 동일)
        const container = document.getElementById('scrollContainer');
        const observerOptions = {
            root: container,
            threshold: 0.45,
            rootMargin: '0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                } else {
                    entry.target.classList.remove('visible');
                }
            });
        }, observerOptions);

        const panels = container.querySelectorAll('.panel');
        panels.forEach(panel => observer.observe(panel));
    });
</script>
</body>
</html>
